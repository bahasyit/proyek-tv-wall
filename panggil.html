<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kontrol Antrian</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f4f4; display: flex; justify-content: center; align-items: center; min-height: 90vh; }
        .container { width: 100%; max-width: 400px; background: #fff; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        h1 { margin-top: 0; color: #333; }
        hr { border: 0; border-top: 1px solid #eee; margin: 20px 0; }
        button { display: block; width: 100%; padding: 15px; font-size: 18px; font-weight: bold; margin-bottom: 15px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; }
        .btn-panggil { background-color: #28a745; color: white; }
        .btn-panggil:hover { background-color: #218838; }
        .btn-reset { background-color: #dc3545; color: white; }
        .btn-reset:hover { background-color: #c82333; }
        .btn-ganti { background-color: #007bff; color: white; }
        .btn-ganti:hover { background-color: #0069d9; }
        label { display: block; margin-bottom: 5px; font-weight: bold; text-align: left; }
        input[type="text"], select { box-sizing: border-box; width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 5px; font-size: 16px; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Kontrol Antrian Sekolah (ONLINE)</h1>
        <hr>
        <label for="kodeLayanan">Kode Layanan:</label>
        <select id="kodeLayanan">
            <option value="A">A (Admisi)</option>
            <option value="B">B (Konsultasi)</option>
            <option value="C">C (Pembayaran)</option>
        </select>
        
        <label for="jenisLayanan">Teks Layanan:</label>
        <input type="text" id="jenisLayanan" value="(Admisi)">
        
        <button onclick="gantiLayanan()" class="btn-ganti">Ganti Layanan Saat Ini</button>
        <hr>
        <button onclick="panggilBerikutnya()" class="btn-panggil">Panggil Berikutnya (+1)</button>
        <button onclick="resetAntrian()" class="btn-reset">Reset Nomor ke 001</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // --- Bagian 1: KONFIGURASI FIREBASE ---
        const firebaseConfig = {
          apiKey: "AIzaSyDnl0AJU10tBXze8u4nDdZoaAUFo8ypFiQ",
          authDomain: "project-tv-wall.firebaseapp.com",
          databaseURL: "https://project-tv-wall-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "project-tv-wall",
          storageBucket: "project-tv-wall.firebasestorage.app",
          messagingSenderId: "562728437251",
          appId: "1:562728437251:web:85e9f229b6e4d02b4f7036"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const refAntrian = database.ref('antrian'); // Menunjuk ke 'antrian'

        // --- Bagian 2: Variabel & Data Awal ---
        let dataAntrian = {
            kode: 'A',
            nomor: 1,
            jenis: '(Admisi)'
        };

        refAntrian.once('value', (snapshot) => {
            if (snapshot.exists()) {
                dataAntrian = snapshot.val();
            } else {
                refAntrian.set(dataAntrian);
            }
            document.getElementById('kodeLayanan').value = dataAntrian.kode;
            document.getElementById('jenisLayanan').value = dataAntrian.jenis;
        });

        // --- Bagian 3: FUNGSI TOMBOL (Menulis ke Firebase) ---
        function panggilBerikutnya() {
            dataAntrian.nomor++;
            refAntrian.set(dataAntrian);
        }
        function resetAntrian() {
            dataAntrian.nomor = 1;
            refAntrian.set(dataAntrian);
        }
        function gantiLayanan() {
            dataAntrian.kode = document.getElementById('kodeLayanan').value;
            dataAntrian.jenis = document.getElementById('jenisLayanan').value;
            refAntrian.set(dataAntrian);
        }
    </script>
</body>
</html>